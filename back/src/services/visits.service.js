// ◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘

var express = require("express")
const { failIfUndefinedIds } = require("../helpers/helper")
const { deleteVisits, createVisit } = require("../repositories/visits.repository")

// ◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘◘

module.exports = {
	deleteOldsAndCreateVisitOrFail,
}

// *****************************************************************************
async function deleteOldsAndCreateVisitOrFail({ senderId, targetId }) {
	failIfUndefinedIds("deleteOldsAndCreateVisit", senderId, targetId)

	await deleteVisits({ senderId, targetId })
	return await createVisit({ senderId, targetId })
}
